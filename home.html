<!doctype html>
<html lang="tr">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Ana Sayfa</title>

  <!-- Bootstrap CSS + Icons -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
  <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.css" rel="stylesheet">

  <script>
    // Giriş yapılmadıysa login'e dön
    document.addEventListener("DOMContentLoaded", () => {
      if (sessionStorage.getItem("auth") !== "true") {
        window.location.href = "index.html";
      }
    });
  </script>

  <style>
    :root{
      --brand-start:#6a11cb;
      --brand-end:#2575fc;
    }
    body{
      background: radial-gradient(1200px 600px at 80% -10%, rgba(37,117,252,.25), transparent 60%),
                  radial-gradient(900px 500px at -10% 20%, rgba(106,17,203,.25), transparent 60%),
                  #f6f7fb;
    }
    .navbar{
      background: linear-gradient(90deg, var(--brand-start), var(--brand-end));
    }
    .hero{
      background: linear-gradient(135deg, rgba(106,17,203,.12), rgba(37,117,252,.12));
      border: 1px solid rgba(0,0,0,.06);
      border-radius: 20px;
    }
    .card-hover{
      transition: transform .18s ease, box-shadow .18s ease;
      border: 0;
      border-radius: 16px;
    }
    .card-hover:hover{
      transform: translateY(-4px);
      box-shadow: 0 12px 28px rgba(0,0,0,.12);
    }
    #dataWrap{ overflow:auto; background:#fff; border-radius: 14px; }
    table{ white-space: nowrap; }
    /* yüzen kısayol butonları */
    .fab{
      position: fixed; bottom: 24px; z-index: 1031;
      width: 52px; height: 52px; border-radius: 50%;
      display: grid; place-items: center; box-shadow: 0 10px 20px rgba(0,0,0,.18);
    }
    .fab-left{ left: 24px; background: #0d6efd; color:#fff; }
    .fab-right{ right: 24px; background: #6610f2; color:#fff; }
  </style>
</head>
<body>

<!-- NAVBAR -->
<nav class="navbar navbar-expand-lg navbar-dark">
  <div class="container-fluid">
    <a class="navbar-brand fw-semibold" href="#"><i class="bi bi-brightness-high"></i> Renkli Panel</a>

    <div class="ms-auto d-flex gap-2">
      <button class="btn btn-outline-light" data-bs-toggle="offcanvas" data-bs-target="#offcanvasMenu">
        <i class="bi bi-list"></i> Menü
      </button>
      <button class="btn btn-outline-light" data-bs-toggle="offcanvas" data-bs-target="#offcanvasNotif">
        <i class="bi bi-bell"></i> Duyurular
      </button>
      <button class="btn btn-light" id="logoutBtn"><i class="bi bi-box-arrow-right"></i> Çıkış</button>
    </div>
  </div>
</nav>

<!-- HERO -->
<section class="container my-4">
  <div class="p-5 text-center hero shadow-sm">
    <h1 class="display-6 fw-bold mb-2">Hoş geldin 🎉</h1>
    <p class="text-muted mb-4">Soldan menüyü, sağdan duyuruları açabilir; aşağıda verilerini tabloya dökebilirsin.</p>
    <a href="#icerik" class="btn btn-primary btn-lg"><i class="bi bi-chevron-down"></i> Keşfet</a>
  </div>
</section>

<!-- RENKLİ KARTLAR -->
<section class="container mb-4" id="icerik">
  <div class="row g-3">
    <div class="col-md-4">
      <div class="card card-hover text-white" style="background: linear-gradient(135deg,#00b09b,#96c93d);">
        <div class="card-body">
          <h5 class="card-title"><i class="bi bi-bar-chart"></i> Analitik</h5>
          <p class="card-text mb-3">Toplanan verileri hızlıca keşfet.</p>
          <a href="#veri" class="btn btn-light btn-sm">Veriye Git</a>
        </div>
      </div>
    </div>
    <div class="col-md-4">
      <div class="card card-hover text-white" style="background: linear-gradient(135deg,#f7971e,#ffd200);">
        <div class="card-body">
          <h5 class="card-title"><i class="bi bi-grid-3x3-gap"></i> Modüller</h5>
          <p class="card-text mb-3">Profil, ayarlar ve kısa yollar.</p>
          <button class="btn btn-light btn-sm" data-bs-toggle="modal" data-bs-target="#aboutModal">Hakkında</button>
        </div>
      </div>
    </div>
    <div class="col-md-4">
      <div class="card card-hover text-white" style="background: linear-gradient(135deg,#7f00ff,#e100ff);">
        <div class="card-body">
          <h5 class="card-title"><i class="bi bi-wifi"></i> Canlı</h5>
          <p class="card-text mb-3">Duyurular için sağ paneli kullan.</p>
          <button class="btn btn-light btn-sm" data-bs-toggle="offcanvas" data-bs-target="#offcanvasNotif">Aç</button>
        </div>
      </div>
    </div>
  </div>
</section>

<!-- TABLAR + VERİ YÜKLEME -->
<section class="container mb-5" id="veri">
  <ul class="nav nav-tabs" role="tablist">
    <li class="nav-item" role="presentation">
      <button class="nav-link active" data-bs-toggle="tab" data-bs-target="#tablo" type="button" role="tab">
        <i class="bi bi-table"></i> Tablo
      </button>
    </li>
    <li class="nav-item" role="presentation">
      <button class="nav-link" data-bs-toggle="tab" data-bs-target="#grafik" type="button" role="tab">
        <i class="bi bi-graph-up"></i> Grafik (yakında)
      </button>
    </li>
  </ul>

  <div class="tab-content p-3 bg-white border border-top-0 rounded-bottom">
    <!-- TABLO -->
    <div class="tab-pane fade show active" id="tablo" role="tabpanel">
      <div class="d-flex align-items-center gap-2 mb-3">
        <button id="loadBtn" class="btn btn-success"><i class="bi bi-upload"></i> Excel/CSV Yükle</button>
        <span id="hint" class="text-muted">Henüz dosya seçilmedi.</span>
      </div>
      <input type="file" id="fileInput" accept=".xlsx,.csv" class="d-none">
      <div id="dataWrap" class="p-3 border">
        <table id="dataTable" class="table table-striped table-bordered table-sm align-middle mb-0"></table>
      </div>
    </div>

    <!-- GRAFİK -->
    <div class="tab-pane fade" id="grafik" role="tabpanel">
      <p class="text-muted">Bu sekmeye istersek Chart.js ile grafikler ekleyebiliriz.</p>
    </div>
  </div>
</section>

<!-- OFFCANVAS: SOL MENÜ -->
<div class="offcanvas offcanvas-start" tabindex="-1" id="offcanvasMenu">
  <div class="offcanvas-header">
    <h5 class="offcanvas-title"><i class="bi bi-menu-button-wide"></i> Menü</h5>
    <button type="button" class="btn-close" data-bs-dismiss="offcanvas"></button>
  </div>
  <div class="offcanvas-body">
    <div class="list-group">
      <a class="list-group-item list-group-item-action" href="#icerik"><i class="bi bi-stars"></i> Öne Çıkanlar</a>
      <a class="list-group-item list-group-item-action" href="#veri"><i class="bi bi-table"></i> Veri Tablosu</a>
      <a class="list-group-item list-group-item-action" data-bs-toggle="modal" data-bs-target="#aboutModal"><i class="bi bi-info-circle"></i> Hakkında</a>
    </div>
  </div>
</div>

<!-- OFFCANVAS: SAĞ DUYURULAR -->
<div class="offcanvas offcanvas-end" tabindex="-1" id="offcanvasNotif">
  <div class="offcanvas-header">
    <h5 class="offcanvas-title"><i class="bi bi-bell"></i> Duyurular</h5>
    <button type="button" class="btn-close" data-bs-dismiss="offcanvas"></button>
  </div>
  <div class="offcanvas-body">
    <div class="list-group">
      <div class="list-group-item">
        <div class="fw-semibold">Sürüm 1.0 yayınlandı</div>
        <small class="text-muted">Yeni renkler ve paneller eklendi.</small>
      </div>
      <div class="list-group-item">
        <div class="fw-semibold">Tablo iyileştirmesi</div>
        <small class="text-muted">Excel/CSV daha hızlı aktarılıyor.</small>
      </div>
    </div>
  </div>
</div>

<!-- MODAL: HAKKINDA -->
<div class="modal fade" id="aboutModal" tabindex="-1">
  <div class="modal-dialog modal-dialog-centered">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title"><i class="bi bi-palette"></i> Bu sayfa hakkında</h5>
        <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
      </div>
      <div class="modal-body">
        Bootstrap + SheetJS ile renkli ve etkileşimli bir demo. Solda menü, sağda duyurular, altta veri yükleme.
      </div>
      <div class="modal-footer">
        <button class="btn btn-secondary" data-bs-dismiss="modal">Kapat</button>
      </div>
    </div>
  </div>
</div>

<!-- YÜZEN KISAYOLLAR -->
<button class="fab fab-left"  title="Menü"      data-bs-toggle="offcanvas" data-bs-target="#offcanvasMenu"><i class="bi bi-list"></i></button>
<button class="fab fab-right" title="Duyurular" data-bs-toggle="offcanvas" data-bs-target="#offcanvasNotif"><i class="bi bi-bell"></i></button>

<!-- SCRIPTS -->
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/xlsx/dist/xlsx.full.min.js"></script>
<script>
  // Çıkış
  document.getElementById("logoutBtn").addEventListener("click", () => {
    sessionStorage.removeItem("auth");
    window.location.href = "index.html";
  });

  // Excel/CSV yükleme
  const loadBtn   = document.getElementById('loadBtn');
  const fileInput = document.getElementById('fileInput');
  const dataTable = document.getElementById('dataTable');
  const hint      = document.getElementById('hint');

  loadBtn.addEventListener('click', () => fileInput.click());

  fileInput.addEventListener('change', async (e) => {
    const file = e.target.files?.[0];
    if (!file) return;
    hint.textContent = 'Yükleniyor...';

    try {
      const buffer = await file.arrayBuffer();
      const wb = XLSX.read(buffer, { type: 'array' });
      const sheet = wb.Sheets[wb.SheetNames[0]];
      const rows = XLSX.utils.sheet_to_json(sheet, { header: 1 });
      if (!rows.length){ hint.textContent='Boş dosya'; dataTable.innerHTML=''; return; }

      const thead = rows[0];
      let html = '<thead><tr>';
      thead.forEach(h => html += `<th>${(h ?? '').toString()}</th>`);
      html += '</tr></thead><tbody>';
      for(let i=1;i<rows.length;i++){
        html += '<tr>';
        const r = rows[i];
        for(let j=0;j<thead.length;j++){
          html += `<td>${(r?.[j] ?? '').toString()}</td>`;
        }
        html += '</tr>';
      }
      html += '</tbody>';
      dataTable.innerHTML = html;
      hint.textContent = `Yüklendi: ${file.name}`;
    } catch (err){
      console.error(err);
      hint.textContent = 'Okuma hatası. Lütfen .xlsx veya .csv deneyin.';
      dataTable.innerHTML = '';
    } finally {
      fileInput.value = '';
    }
  });
</script>
</body>
</html>
